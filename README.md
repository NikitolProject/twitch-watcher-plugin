# Twitch Watcher Plugin

Плагин для серверов Paper/Purpur, который отслеживает стримеров на Twitch и уведомляет игроков о начале их трансляций.

## Возможности

- **Автоматические уведомления**: Отправляет настраиваемое сообщение в чат, когда стример из списка выходит в прямой эфир.
- **Кликабельные ссылки**: Сообщения в чате содержат кликабельную ссылку на канал стримера.
- **Гибкая настройка**: Полностью настраиваемый список стримеров и формат сообщений через `config.yml`.
- **Команды**: Удобные команды для администраторов и игроков.
- **Поддержка PlaceholderAPI**: Интеграция с PAPI для отображения количества стримеров в прямом эфире.
- **Надёжность**: Отслеживает окончание стрима и уведомит снова, если стример перезапустит трансляцию.

## Зависимости

- **(Опционально)** [PlaceholderAPI](https://www.spigotmc.org/resources/placeholderapi.6245/): Требуется, если вы хотите использовать плейсхолдер `%twitchwatcher_live_count%`.

## Установка

1.  Скачайте последнюю версию плагина `twitch-watcher-plugin-x.x.x.jar` из раздела Releases.
2.  Поместите скачанный `.jar` файл в папку `plugins` вашего сервера.
3.  Перезапустите сервер, чтобы сгенерировался файл `config.yml`.
4.  Откройте `plugins/TwitchWatcher/config.yml` и настройте его.
5.  Выполните команду `/tw reload` или перезапустите сервер, чтобы применить изменения.

## Настройка (`config.yml`)

Основной файл конфигурации, где вы можете настроить все аспекты плагина.

```yaml
# ... (секция twitch-api)

# Интервал проверки статуса стримеров (в секундах).
check-interval-seconds: 60

# Список стримеров для отслеживания.
streamers:
  - twitch-nickname: "xQc"
    minecraft-nickname: "MasterGamer123"
  - twitch-nickname: "summit1g"
    minecraft-nickname: "ServerAdmin"

# Настройки уведомлений.
notifications:
  # Если true, плагин будет отправлять уведомление о начале стрима, только если стример онлайн на сервере.
  # Если стример начнет стрим, будучи оффлайн, уведомление придет, как только он зайдет на сервер.
  check-if-player-is-online: true
  # Настройки сообщений.
  # Доступные плейсхолдеры:
  # %streamer_name% - Никнейм стримера на Twitch.
  # %minecraft_name% - Никнейм игрока на сервере.
  stream-start:
    - "&e&lСТРИМ!"
    - "&aИгрок &f%minecraft_name% &aначал трансляцию на Twitch!"
    - "&7Смотрите его на канале: &dhttps://twitch.tv/%streamer_name%"
    - ""

  # Сообщения для команды /tw list. Доступен плейсхолдер %count%.
  list-header: "&e&lСтримеры онлайн (%count%):"
  no-one-is-live: "&cСейчас никто не стримит."
```

## Команды и права доступа

| Команда | Описание | Права доступа | Алиас |
| --- | --- | --- | --- |
| `/twitchwatcher list` | Показывает список стримеров, которые сейчас в сети. | `(нет)` | `tw` |
| `/twitchwatcher reload` | Перезагружает конфигурацию плагина. | `twitchwatcher.admin` | `tw` |

## Интеграция с PlaceholderAPI

Плагин регистрирует один плейсхолдер, если на сервере установлен PlaceholderAPI.

- **`%twitchwatcher_live_count%`**
  - **Описание**: Отображает количество стримеров из вашего конфига, которые в данный момент находятся в прямом эфире.
  - **Пример использования (в MOTD, Tab и т.д.)**: `&aСтримеров онлайн: &e%twitchwatcher_live_count%`
